<!DOCTYPE html>
<html lang="en">
    <head>
        <link rel="stylesheet" href="../styles.css" />
        <link rel="stylesheet" href="./html.css" />
        <script src="../index.js"></script>
    </head>
    <body>
        <button onclick="goToMainPage()">Main</button>
        <h1>HTML - table of contents</h1>
        <p>
            Below table of contents has <code>autofocus</code> attribute, which
            focuses below list at the page load (<code>tabindex</code> needed
            also to be set to -1). Click outside to loose focus from the
            element.
        </p>
        <ul id="table-of-contents" autofocus tabindex="-1">
            <li><a href="#document-structure">Document structure</a></li>
            <li>
                <a href="#contenteditableelement"
                    >Element that can be edited directly in the document</a
                >
            </li>
            <li>
                <a href="#labels-and-inputs"
                    >Labels and inputs, grouping inputs in
                    <code>fieldset</code></a
                >
            </li>
            <li><a href="#custom-attributes">Custom attributes</a></li>
            <li><a href="#html-entities">HTML entities</a></li>
            <li>
                <a href="#anchor-tag"><code>a</code> tag</a>
            </li>
            <li>
                <a href="#links-and-js">Links and JS</a>
            </li>
            <li>
                <a href="#lists">Lists</a>
            </li>
            <li><a href="#forms">Forms</a></li>
            <li><a href="#lazy-images">Lazy loading images</a></li>
            <li><a href="#audio-video">Audio and video</a></li>
            <li>
                <a href="#template-slot-shadow"
                    >HTML template, slot and shadow</a
                >
            </li>
            <li><a href="#focus">Focus</a></li>
            <li><a href="#other-inline-elements">Other inline elements</a></li>
            <li>
                <a href="#details-and-summary">Details and summary elements</a>
            </li>
            <li><a href="#dialog-notes">Dialog</a></li>
            <li>
                <a href="#perf-notes-general"
                    >Note on performance - general browser hints in
                    <code>link</code></a
                >
            </li>
            <li>
                <a href="#perf-notes-videos">Note on performance - videos</a>
            </li>
            <li><a href="#perf-notes-fonts">Note on performance - fonts</a></li>
            <li>
                <a href="#perf-notes-lazyload-iframes"
                    >Note on performance - lazy load <code>iframes</code></a
                >
            </li>
            <li>
                <a href="#perf-notes-prefetch-prerender"
                    >Note on performance - prefetch and prerender pages</a
                >
            </li>
            <li><a href="#web-worker-notes">Web worker</a></li>
        </ul>

        <h1 id="document-structure">
            Document structure <a href="#">Back to top</a>
        </h1>
        <p>
            Worth noting is importance of <code>&lt;!DOCTYPE html&gt;</code> -
            it instructs the browser to render the page in
            <code>no-quirks</code> mode, without it, page can render page with
            <code>quirks</code> mode truned on.
        </p>
        <p>HTML elements can be of three types:</p>
        <ul>
            <li>
                replaced - it gets replaced visually in the document (such as
                <code>button</code>)
            </li>
            <li>
                not-repalced - those aren't replaced visually, and so, require
                styling to get proper look (such as <code>p</code>)
            </li>
            <li>
                void (self-closing) - elements that cannot contain any child
                items (<code>meta</code>, <code>link</code>, etc.)
            </li>
        </ul>

        <h2 id="contenteditableelement">
            Element that can be edited directly in the document
        </h2>
        <p>
            By adding <code>contenteditable</code> we make the element editable,
            so by modifying the style (for example <code>display: block</code>),
            to make it visible, we can achieve interesting results, such as
            below - we made the "style" element visible and editable. Change and
            see how it affects following elements.
        </p>
        <style
            contenteditable
            style="
                display: block;
                font-family: monospace;
                white-space: pre;
                background: #aaa;
            "
        >
            :root {
                --theme-color: #226daa;
            }

            #contenteditableresults {
                display: block;
                border: 10px dotted black;
                background: var(--theme-color);
            }

            #contenteditableresults * {
                color: rgb(175, 113, 237);
                font-weight: 900;
            }
        </style>
        <div id="contenteditableresults">
            <h1>Here are results of the above snippet.</h1>
            <p>Alter the snippet to see the results.</p>
        </div>

        <h1 id="labels-and-inputs">
            Labels and inputs, grouping inputs in <code>fieldset</code
            ><a href="#">Back to top</a>
        </h1>
        <p>
            When using radio buttons or checkboxes with the same names, we
            should wrap then in <code>fieldset</code>, such as below:
        </p>
        <code class="block-code">
            &lt;form&gt;<br />
            &lt;legend&gt;Pick one option&lt;/legend&gt;<br />
            &lt;input id="option1" type="radio" name="example" /&gt;label<br />
            for="option1"<br />
            &gt;<br />
            option 1&lt;/label<br />
            &gt;<br />
            &lt;input id="option2" type="radio" name="example" /&gt;label<br />
            for="option2"<br />
            &gt;<br />
            option 2&lt;/label<br />
            &gt;<br />
            &lt;/form&gt;
        </code>

        <p>Below is example how it looks like:</p>

        <form>
            <legend>Pick one option</legend>
            <input id="option1" type="radio" name="example" /><label
                for="option1"
            >
                option 1</label
            >
            <input id="option2" type="radio" name="example" /><label
                for="option2"
            >
                option 2</label
            >
        </form>

        <p>
            Specifying <code>label</code>'s <code>for</code> attribute let's
            focus/select related input.
        </p>

        <h1 id="custom-attributes">
            Custom attributes<a href="#">Back to top</a>
        </h1>
        <p>
            IN HTML, we can specify own attributes. While HTML is very
            forgiving, there are rules to how custom attributes should be named.
            They have to start with <code>data-</code> prefix, and following
            characters should be lowercase letters or dash, not starting with
            <code>xml</code> nor containing <code>:</code>, for example
            <code>data-name</code> or <code>data-first-name</code>.
        </p>
        <p>
            If the convention is kept, then those values can be accessed in JS
            with <code>dataset[name]</code> (name needs to be converted to camel
            case though). Below button has
            <code>data-is-button-wonderful="certainly"</code> set, clicking on
            it will invoke getting
            <code>dataset['isButtonWonderful']</code> from button HTML element.
        </p>
        <button
            id="custom-attr-btn"
            data-is-button-wonderful="certainly"
            onclick="alert(document.getElementById('custom-attr-btn').dataset['isButtonWonderful'])"
        >
            Click
        </button>

        <h1 id="html-entities">HTML entities<a href="#">Back to top</a></h1>
        <p>
            In the document we can use HTML entites instead of characters, for
            example we can't use simple less than character, as it opens HTML
            tag and would break the document. So, to display &lt; character, we
            use <code class="letterSpacing">& l t ;</code> sequence.
        </p>
        <p>Other HTM entities</p>
        <div
            class="letterSpacing"
            style="
                display: grid;
                grid-template-rows: repeat(auto-fit, 4rem);
                grid-template-columns: auto 1fr;
            "
        >
            <span style="margin: 1ch">Character</span>
            <span style="margin: 1ch">HTML entity</span>

            <span>&#x336;</span>
            <code>& # x 3 3 6 ;</code>

            <span>&#x33C;</span>

            <code>& # x 3 3 C ;</code>

            <span>&#x356;</span>

            <code>& # x 3 5 6 ;</code>

            <span>&tcedil;</span>

            <code>& t c e d i l ;</code>
        </div>

        <h1 id="anchor-tag"><code>a</code> tag<a href="#">Back to top</a></h1>

        <p>
            <code>href</code> attribute speicfies where link takes the user - if
            it starts with protocol, it is absoulte path. Protocol can be
            speicified as <code>//</code>, which means "use current protocol".
            One can also specify relative path to another site in the same
            domain.
        </p>
        <a href="#"
            >This link has <code>href="#"</code>, whcih takes user to top of the
            page.</a
        >
        <p>
            Setting target to <code>_blank</code> will cause new tab on each
            load, but we can specify there also custom string, which will be
            used for tab name (all browsers have that), and consecutive clicks
            will only refresh named tab, instead opening new ones.
        </p>
        <a href="https://google.com/" target="_blank"
            >Go to google <code>target="_blank"</code></a
        ><br />
        <a href="https://google.com/" target="googletab"
            >Go to google <code>target="googletab"</code></a
        >
        <h2 id="links-and-js">Links and JS</h2>
        <p>
            The <code>links</code> property of the <code>document</code> objects
            returns all links in the document:
        </p>
        <code class="block-code">
            let a = document.links[0]; // obtain the first link in the document
        </code>
        <button
            onclick="alert(`First link on the page is ${document.links[0].href}`)"
        >
            Get first link on the page
        </button>

        <h1 id="lists">Lists<a href="#">Back to top</a></h1>
        <p>
            Lists can be unordered or ordered. Ordered lists can have numbers,
            letters or other indicators
        </p>

        <div
            style="
                display: grid;
                grid-template-columns: repeat(4, 1fr);
                border: 1px solid black;
            "
        >
            <ul>
                <li>item</li>
                <li>item</li>
                <li>item</li>
            </ul>

            <ol>
                <li>item</li>
                <li>item</li>
                <li>item</li>
            </ol>

            <ol type="A">
                <li>item</li>
                <li>item</li>
                <li>item</li>
            </ol>

            <ol type="I">
                <li>item</li>
                <li>item</li>
                <li>item</li>
            </ol>
        </div>

        <p>Reversed order:</p>
        <ol reversed>
            <li>item 1</li>
            <li>item 2</li>
            <li>item 3</li>
        </ol>

        <p>
            Even more weird indicators of ordered lists with
            <code>list-style-type</code> CSS property
        </p>
        <ol style="list-style-type: cjk-decimal">
            <li>item</li>
            <li>item</li>
            <li>item</li>
        </ol>

        <p>
            Here we alter numbers with <code>start</code> attribute on
            <code>ol</code> element and <code>value</code> attribute on
            <code>li</code> element.
        </p>
        <ol start="33">
            <li>
                start at 33 (<code>start</code> attribute on <code>ol</code>)
            </li>
            <li>item</li>
            <li value="7">reset to seven with <code>value</code> attribute</li>
            <li>item</li>
        </ol>

        <h2>Description list</h2>
        <p>Last type of list is data list <code>dl</code>:</p>
        <dl>
            <dt>first term</dt>
            <dd>first definition</dd>
            <dt>second term</dt>
            <dd>second definition</dd>
        </dl>

        <h2>HTML table</h2>
        <table>
            <caption>
                Table's caption - HTML table example
            </caption>
            <colgroup></colgroup>
            <thead>
                <th>first header</th>
                <th>second header</th>
            </thead>
            <tbody>
                <td>first table data</td>
                <td>second table data</td>
            </tbody>
            <tfoot></tfoot>
        </table>

        <h1 id="forms">Forms<a href="#">Back to top</a></h1>

        <p>
            There are various input types, for exapmle <code>file</code>,
            together with <code>capture</code> attribute, can be used to collect
            data through microphone/camera.
        </p>
        <label
            >Your recent photo:
            <input capture="environment" accept="image/*" type="file"
        /></label>

        <h1 id="lazy-images">Lazy loading images<a href="#">Back to top</a></h1>
        <p>
            In order to save network data, there's technique to load image only
            if it becomes visible. This part of the website should be far at the
            bottom and below picture is fetched (observe in Dev Tools - Netowrk
            tab) only when scrolled to. To use that feature, we need to specify:
            <code>&lt;img loading="lazy" ... /&gt;</code>
        </p>
        <img
            loading="lazy"
            style="margin: 0 auto; display: block"
            src="../images/lazy-image.jpg"
        />

        <h1 id="audio-video">Audio and video<a href="#">Back to top</a></h1>

        <p>
            With <code>video</code> element, we can embed video in HTML
            document.
        </p>
        <p>
            Below video has <code>poster</code> attribute set to show
            placeholder image, while the video is loaded and not yet played.
            Here we used some flowers image from this site's assets.
        </p>
        <video
            style="display: block; margin: auto"
            src="../videos/flower.webm"
            poster="../images/flowers.webp"
            controls
        ></video>
        <p>
            We can also nest inside <code>video</code> element other elements,
            such as <code>source</code> or <code>track</code>.
        </p>
        <p>
            <code>source</code> is used to specify fallback sources of video,
            for example depenending on video format (maybe primary video format
            is not supported in user's browser, thus, in need of fallback):
        </p>
        <code class="block-code">
            &lt;video controls poster="..."&gt;<br />
            &lt;source src="videos/machines.webm" type="video/webm"&gt;<br />
            &lt;source src="videos/machines.mp4" type="video/mp4"&gt;<br />
            &lt;source src="videos/machines.ogv" type="video/ogg"&gt;<br />
            &lt;/video&gt;
        </code>
        <p>
            To even further optimize, while not fully supported, we can specify
            codecs in <code>source</code> <code>type</code> attribute:
        </p>
        <code class="block-code">
            &lt;video controls poster="..."&gt;<br />
            &lt;source src="videos/machines.webm"
            type="video/webm;codecs=vp8,vorbis"&gt;<br />
            &lt;source src="videos/machines.mp4"
            type="video/mp4;codecs=avc1.4d002a"&gt;<br />
            &lt;source src="videos/machines.ogv" type="video/ogg"&gt;<br />
            &lt;/video&gt;
        </code>

        <p>
            <code>track</code> element allows to provide subtitles for video. It
            is specified as follows:
        </p>

        <code class="block-code">
            &lt;video controls poster="..."&gt;<br />
            &lt;source src="videos/machines.webm" type="video/webm"&gt;<br />
            <b
                >&lt;track label="English" kind="subtitles" srclang="en"
                src="vtt/subtitles-en.vtt" default /&gt;<br />&lt;track
                label="Français" kind="subtitles" srclang="fr" lang="fr-fr"
                src="vtt/subtitles-fr.vtt" /&gt;<br /></b
            >&lt;/video&gt;
        </code>

        <h1 id="template-slot-shadow">
            HTML template, slot and shadow<a href="#">Back to top</a>
        </h1>

        <p>
            Using <code>template</code> element one can create reusable
            components - write HTML once and reuse everywhere.
        </p>
        <p>
            In order to do that, we need to create
            <code>template</code> element (below in HTML code, and also below
            visually):
        </p>

        <template id="star-rating-template">
            <form>
                <fieldset>
                    <legend>Rate your experience</legend>
                    <rating>
                        <input
                            type="radio"
                            name="rating"
                            value="1"
                            aria-label="1 star"
                            required
                        />
                        <input
                            type="radio"
                            name="rating"
                            value="2"
                            aria-label="2 star"
                        />
                        <input
                            type="radio"
                            name="rating"
                            value="3"
                            aria-label="3 star"
                        />
                        <input
                            type="radio"
                            name="rating"
                            value="4"
                            aria-label="4 star"
                        />
                        <input
                            type="radio"
                            name="rating"
                            value="5"
                            aria-label="5 star"
                        />
                    </rating>
                </fieldset>
                <button type="reset">Reset</button>
                <button type="submit">Submit</button>
            </form>
        </template>

        <code class="block-code">
            &lt;template id="star-rating-template"&gt;<br />
            &lt;form&gt;<br />
            &lt;fieldset&gt;<br />
            &lt;legend&gt;<br />Rate your experience&lt;/legend&gt;<br />
            &lt;rating&gt;<br />
            &lt;input type="radio" name="rating" value="1" aria-label="1 star"
            required /&gt;<br />
            &lt;input type="radio" name="rating" value="2" aria-label="2 star"
            /&gt;<br />
            &lt;input type="radio" name="rating" value="3" aria-label="3 star"
            /&gt;<br />
            &lt;input type="radio" name="rating" value="4" aria-label="4 star"
            /&gt;<br />
            &lt;input type="radio" name="rating" value="5" aria-label="5 star"
            /&gt;<br />
            &lt;/rating&gt;<br />
            &lt;/fieldset&gt;<br />
            &lt;button type="reset"&gt;<br />Reset&lt;/button&gt;<br />
            &lt;button type="submit"&gt;<br />Submit&lt;/button&gt;<br />
            &lt;/form&gt;<br />
            &lt;/template&gt;<br />
        </code>

        <p>
            In order to use this template, we need to write small JS: we need to
            get the template by ID and insert its content (HTML content) into
            the document.
        </p>
        <p id="star-rating-template-paragraph">
            Below is the template's content:
        </p>

        <script>
            const appendAfterElement = document.getElementById(
                'star-rating-template-paragraph'
            )
            const template = document.getElementById('star-rating-template')

            appendAfterElement &&
                template &&
                appendAfterElement.after(template.content)
        </script>

        <h2><code>slot</code> element</h2>

        <p>
            <code>template</code> can include <code>slot</code> element, which
            will be "replaceable" content within the template. It will have own
            children (HTML elements), that will be rendered in the template by
            default. If we want to insert HTML in the slot, we need to pass
            element with <code>slot</code> attribute, that matches
            <code>name</code> of the slot. Additionally, we need to use some JS,
            in order to create new HTML element (custom component), so we can
            use slots' feature. Below we have HTML as well as JS (in HTML code)
            - visually, the example is right below:
        </p>

        <template id="custom-template-with-slot-template">
            <div style="border: 1px solid black">
                <p>
                    This is template with border, this description and below we
                    have <code>slot</code>:
                </p>
                <slot name="message-in-the-bottle">
                    <h2>Here we have SLOT - this is default content.</h2>
                </slot>
            </div>
        </template>

        <script>
            customElements.define(
                'template-with-slot',
                class extends HTMLElement {
                    constructor() {
                        super()
                        let template = document.getElementById(
                            'custom-template-with-slot-template'
                        )
                        this.attachShadow({ mode: 'open' }).appendChild(
                            template.content.cloneNode(true)
                        )
                    }
                }
            )
        </script>

        <template-with-slot></template-with-slot>
        <template-with-slot>
            <h5 slot="message-in-the-bottle">
                Customized message, smaller heading.
            </h5>
        </template-with-slot>

        <p>
            As with other elements, custom components can be styled with CSS,
            regular selector with name of the component would suffice:
            <code>custom-component { ... }</code>. Also, we can style component
            by adding <code>style</code> element inside the template - it won't
            spill out and affect elements outside the template.
        </p>
        <p>
            In order to style "external" elements to template, we can use
            <code>host</code> pseudo class in order to style element, that hosts
            the template.
        </p>
        <p>
            <code>::slotted()</code> pseudo element allows styling elements,
            that are used as <code>slot</code> contents.
        </p>
        <p>
            To style specific parts of template, we have to define
            <code>part</code> attribute on the elements inside the template,
            then in CSS (global) we can specify: <code>::part()</code> with
            parameter matching <code>part</code> attribute's value.
        </p>

        <h1 id="focus">Focus <a href="#">Back to top</a></h1>

        <p>
            If document has focues element, it will be accessible through
            <code>document.activeElement</code> property, as below example
            demonstrates:
        </p>

        <p
            style="background: #eee; padding: 1ch"
            id="focusable-paragraph"
            tabindex="-1"
        >
            I will receive focus upon clicking following button:
            <span role="button" id="show-active-element"
                >Show active element</span
            >
        </p>
        <p>
            Also, browser scrolls focused elements into view, unless
            <code>focus({ preventScroll: true })</code> is called, instead of
            just <code>focus()</code>
        </p>
        <button onclick="focusTableOfContents(true)">
            Focus table of contents at the top
        </button>
        <button onclick="focusTableOfContents(false)">
            Focus table of contents at the top <b>without scroll</b>
        </button>

        <p>
            There are also ways to prevent element getting focus - by disabling
            them (<code>disbale</code> attribute), or by making them inert
            (<code>inert</code> attribute).
        </p>
        <p>
            Disabling elements is making them non-focusable, enables uses of
            <code>:disabled</code> pseudo class (in pair with
            <code>:enabled</code>), and has some default styles to make visual
            distinction of that state.
        </p>
        <p>
            Inert elements don't have any pseudo-class for styling, neither they
            have any default visual distinction - it's developer's duty to take
            care of that.
        </p>
        <p>Below are buttons with the same click handler:</p>
        <ul>
            <li>
                regular button:
                <button onclick="alert('Hello world')">
                    Click me and show alert
                </button>
            </li>
            <li>
                disabled button:
                <button disabled onclick="alert('Hello world')">
                    Click me and show alert
                </button>
            </li>
            <li>
                inert button:
                <button inert onclick="alert('Hello world')">
                    Click me and show alert
                </button>
            </li>
        </ul>

        <script>
            function focusTableOfContents(scrollIntoView) {
                document
                    .getElementById('table-of-contents')
                    .focus({ preventScroll: !scrollIntoView })
            }

            document
                .getElementById('show-active-element')
                .addEventListener('click', () => {
                    document.getElementById('focusable-paragraph').focus()
                    // Give time for browser to really focus element (also
                    // apply visual effects) before showing alert.
                    setTimeout(() => alert(document.activeElement), 10)
                })
        </script>

        <h1 id="other-inline-elements">
            Other inline elements <a href="#">Back to top</a>
        </h1>

        <p>
            <code>pre</code> element can be used to present the text exactly as
            it was formatted in source code, so for example, no need for
            spamming <code>br</code> elements in blocks of code:
        </p>
        <pre><code class="block-code"
>public class ThisIsFun {
    public string Message { get; set; }
}</code></pre>
        <p>We have more inline elements:</p>
        <ul>
            <li>
                <code>data</code> for example (bold font added with style):
                <data style="font-weight: bold" value="398"
                    >This has value of 398</data
                >
            </li>
            <li>
                <code>time</code> for example: The concert starts at
                <time datetime="20:00">20:00</time>
            </li>
            <li>
                <code>samp</code> used to display sample output, for example:
                <samp>I am the output</samp>
            </li>
            <li>
                <code>kbd</code> used to provide instruction about keyboard, for
                example: Please press <kbd>SHIFT</kbd> key.
            </li>
            <li>
                <code>var</code> can be used for math expressions (MathML is a
                option, if plenty of maths is written) or programming variables,
                for example: I like to name my variables in vague way:
                <var>integerValue</var>
            </li>
            <li>
                <code>sup</code> for exapmle: <var>x</var><sup>2</sup>+<var
                    >y</var
                ><sup>2</sup>=<var>z</var><sup>2</sup>
            </li>
            <li><code>sub</code> for example: H<sub>2</sub>O</li>
            <li><code>del</code> indicates text that has been removed</li>
            <li><code>ins</code> indicates text that has been inserted</li>
            <li><code>abbr</code></li>
            <li><code>dfn</code></li>
            <li><code>bdi</code></li>
            <li><code>bdo</code></li>
            <li><code>ruby</code></li>
            <li>
                <code>em</code> used to emphasize span of text, for example:
                This is <em>emphasis</em>
            </li>
            <li>
                <code>mark</code> used to mark, highlight span of text, for
                example: This is <mark>marked text</mark>
            </li>
            <li>
                <code>strong</code> used to identify text of strong importance,
                for example: <strong>This is important information.</strong>
            </li>
            <li>
                <code>cite</code> used to mark the titles of books or other
                sources, or other, such as ISBN book number, for example (source
                website is enclosed in the <code>cite</code>): This site and its
                notes were made based on <cite>web.dev</cite> site,
                <a href="https://web.dev">link</a>
            </li>
            <li><code>i</code> - not recommended, use CSS instead</li>
            <li><code>u</code> - not recommended, use CSS instead</li>
            <li><code>b</code> - not recommended, use CSS instead</li>
            <li><code>br</code> - break line (force new line)</li>
            <li>
                <code>hr</code> - horizontal separator, for example (its
                semantic meaning is <code>separator</code>):
                <hr />
            </li>
            <li>
                <code>wbr</code> - it is a hint, where the browser might break
                the text, if it overflows; DOES NOT ADD HYPHEN
            </li>
        </ul>

        <h1 id="details-and-summary">
            Details and summary elements <a href="#">Back to top</a>
        </h1>

        <p>
            In HTML (it's one of latest additons), there are semantic elements
            to display accordion controls, those are <code>details</code> and
            <code>summary</code>
        </p>

        <details>
            <summary>Michał Turczyn</summary>
            <p>Person, human, quite old, quite grumpy</p>
        </details>

        <details>
            <summary>Wonder Woman</summary>
            <p>Person, superhuman, cool and fun.</p>
        </details>

        <p>
            If we expand element, <code>details</code> elements received
            <code>open</code> attribute, which then can be used to specify CSS
            rules for the element, where we can adjust appearance. Selector
            would be <code>detailas[open]</code>. Some styled element:
        </p>
        <div id="styled-details-container">
            <details>
                <summary>Red</summary>
                <p>
                    Not so nice, irritating color with RGB value close to
                    #FF0000
                </p>
            </details>
            <details>
                <summary>Green</summary>
                <p>Very nice, calming color with RGB value close to #00FF00</p>
            </details>
            <details>
                <summary>Blue</summary>
                <p>Very nice, calming color with RGB value close to #0000FF</p>
            </details>
        </div>

        <p>
            The <code>summary</code> element must come first in
            <code>details</code> element and should contain caption or legend
            for the rest of the contents of <code>details</code>.
            <code>summary</code> can contain any content - plain text or other
            HTML tags.
        </p>
        <p>
            If <code>summary</code> element is not provided in
            <code>details</code>, the browser have default "Details" label, in
            user's agent's language of course. For example:
        </p>
        <details>
            <p>
                This description is about summary, that does not exists here :)
            </p>
        </details>

        <h1 id="dialog-notes">Dialog <a href="#">Back to top</a></h1>

        <p>
            Dialog is used to show popup dialog to get the user's focus. It can
            be shown in modal way (rest of page is covered with semitransparent
            layer and is made inert) or non-modal way, so rest of page is still
            interactive.
        </p>
        <p>
            When opened as modal, there's backdrop that covers rest of page and
            this can be styled with <code>::backdrop</code> pseudo element.
        </p>
        <p>
            When opened as modal, also <kbd>ESC</kbd> key can close the modal.
        </p>
        <p>
            Main method to close the <code>dialog</code> is to use JS method on
            that element: <code>close()</code>. Other method to close the dialog
            WITHOUT JS is using <code>form</code> element and
            <code>button</code>, with correct attributes (open the dialog and
            see).
        </p>
        <dialog id="dialog">
            <h1>Congratulations!</h1>
            <h3>You've just opened the dialog :)</h3>
            <p>
                Try clicking outside of this dialog box - depending if the
                dialog was shown as modal or not, rest of the page can remain
                interactive or not.
            </p>
            <button onclick="document.getElementById('dialog').close()">
                Close me
            </button>
            <p>
                Other methods to close the dialog WITHOUT JS, using
                <code>form</code> element and <code>button</code>, with correct
                attributes
            </p>
            <form method="dialog">
                <button type="submit" autofocus>close</button>
            </form>
            <form>
                <button formmethod="dialog" autofocus>close</button>
            </form>
        </dialog>

        <label>
            <input type="checkbox" id="show-dialog-as-modal" /> Show dialog as
            modal
        </label>
        <button onclick="showDialog()">Show dialog</button>

        <script>
            function showDialog() {
                let asModal = document.getElementById(
                    'show-dialog-as-modal'
                ).checked
                let dialog = document.getElementById('dialog')
                if (asModal) {
                    dialog.showModal()
                } else {
                    dialog.show()
                }
            }
        </script>

        <h1 id="perf-notes-general">
            Note on performance - general browser hints in <code>link</code
            ><a href="#">Back to top</a>
        </h1>

        <p>
            We can hint the browser to enhance fetching resources with
            <code>link</code> element's attributes.
        </p>

        <h3><code>preconnect</code></h3>
        <p>
            It tells the browser to establish connection to a server, from which
            we will fetch resources, ahead of time. If the origin is different,
            <code>crossorigin</code> must be added, for example:
        </p>
        <code class="block-code">
            &lt;link rel="preconnect" href="https://fonts.googleapis.com"&gt;<br />
            &lt;link rel="preconnect" href="https://fonts.gstatic.com"
            crossorigin&gt;
        </code>

        <h3><code>dns-prefetch</code></h3>
        <p>
            This tells browser to perform DNS lookup for the server, that we
            will fetch resources from.
        </p>

        <h3><code>preload</code></h3>
        <p>
            Tells the browser to initiate fetching the resource. Should be used
            only with late-discovered resources (such as styles imported with
            <code>@import</code> declarations or CSS
            <code>background-image</code>).
        </p>
        <p>
            It also must contain <code>crossorigin</code> attribute for servers
            in different origins.
        </p>
        <p>
            Also, to prevent double fetching, <code>as</code> attribute must be
            correctly specified.
        </p>
        <code class="block-code">
            &lt;link rel="preload" href="/font.woff2" as="font" crossorigin&gt;
        </code>

        <h3><code>prefetch</code></h3>
        <p>
            Similair to <code>preload</code>, but it is very speculative - it
            initiates very low priority fetch, for resources that might be
            needed or not.
        </p>

        <h3><code>fetchpriority</code> attribute</h3>
        <p>
            Can be used to with elements: <code>link</code>,
            <code>img</code> and <code>script</code>. It can take values:
            <code>high</code>, <code>low</code> and <code>auto</code>.
        </p>

        <h1 id="perf-notes-videos">
            Note on performance - videos<a href="#">Back to top</a>
        </h1>

        <p>
            <code>video</code> element supports <code>source</code> element,
            similairly to picture (it also works the same way - first match get
            used):
        </p>
        <pre><code class='block-code'>&lt;video&gt;
  &lt;source src="video.webm" type="video/webm"&gt;
  &lt;source src="video.mp4" type="video/mp4"&gt;
&lt;/video&gt;</code></pre>

        <p>
            The <code>video</code> element also has
            <code>preload</code> attribute which can take values:
        </p>
        <ul>
            <li>
                <code>none</code> informs the browser that none of the video's
                contents should be preloaded
            </li>
            <li>
                <code>metadata</code> informs the browser to preload video's
                metadata
            </li>
        </ul>

        <p>
            When using <code>poster</code> attribute to display image
            placeholder for the video, it is worth to include
            <code>link</code> for that picture with
            <code>type="preconnect"</code> to optimize fetching the picture.
        </p>

        <h1 id="perf-notes-fonts">
            Note on performance - fonts<a href="#">Back to top</a>
        </h1>
        <p>We can declare font family with <code>@font=family</code>:</p>
        <pre><code class='block-code'>@font-face {
  font-family: "Open Sans";
  src: url("/fonts/OpenSans-Regular-webfont.woff2") format("woff2");
}</code></pre>
        <p>
            Browser will download the font, if it sees that it will be used (so
            the download is necessary). But this wil happen only after browser
            download whole CSS and detects the declaration and usage of the font
            in current layout.
        </p>
        <p>
            We can tell the browser to preload the font with
            <code>link</code> element as follows:
        </p>
        <pre><code class="block-code">&lt;!-- The `crossorigin` attribute is required for fonts—even
self-hosted ones, as fonts are considered CORS resources. --&gt;
&lt;link 
    rel="preload" 
    as="font" 
    href="/fonts/OpenSans-Regular-webfont.woff2" 
    crossorigin&gt;</code></pre>

        <p>
            <code>font-display</code> property can be used to inform the browser
            how to render the fonts. It an take values:
        </p>
        <ul>
            <li><code>block</code></li>
            - blocks rendering of the text, until font is downloaded
            <li>
                <code>swap</code> - tells the browser to diisplay default,
                fallback font, once desired font is loaded, the text is swapped
            </li>
            <li>
                <code>fallback</code> - it blocks the rendering of the page for
                a short while, if the desired font is not yet loaded, the
                fallback is shown and then swapped, once the desired font is
                loaded,
            </li>
            <li>
                <code>optional</code> - it tells the browser to wait for 100ms
                for the desired font, if not loaded in that time, the browser
                uses fallback font, while keeping download of the desired font -
                once loaded, the font is places in cache for later use (<em
                    >but the text is not swapped</em
                >).
            </li>
        </ul>

        <h1 id="perf-notes-lazyload-iframes">
            Note on performance - lazy load <code>iframes</code
            ><a href="#">Back to top</a>
        </h1>

        <p>
            <code>iframes</code> also supports <code>loading</code> attribute
            with <code>eager</code> and <code>lazy</code> values. Just as
            <code>img</code> element does.
        </p>
        <p>
            Similairly to <code>img</code> element, it should have
            <code>width</code> and <code>height</code> attriburtes set to
            prevent layout shifts.
        </p>

        <h1 id="perf-notes-prefetch-prerender">
            Note on performance - prefetch and prerender pages<a href="#"
                >Back to top</a
            >
        </h1>
        <p>
            As already discussed, we use
            <code>&lt;link rel="prefetch" href="/page" as="document"&gt;</code>
            to prefetch resources, and with <code>as="document"</code>, browser
            will load the page with all its JS and other.
        </p>
        <p>In Chromium browsers we can Speculation Rules API:</p>
        <pre><code class="block-code">&lt;script type="speculationrules"&gt;
{
  "prefetch": [{
    "source": "list",
    "urls": ["/page-a", "/page-b"]
  }]
}
&lt;/script&gt;</code></pre>

        <p>
            Note the <code>type="speculationrules"</code> on
            <code>script</code> element. The key of this JSON is an action -
            <code>prefetch</code> or <code>prerender</code>, and its value is
            list of pages to perform the action on.
        </p>

        <p>Similairly it can be used with <code>prerender</code></p>
        <pre><code class="block-code">&lt;script type="speculationrules"&gt;
{
  "prefetch": [{
    "source": "list",
    "urls": ["/page-a", "/page-b"]
  }]
}
&lt;/script&gt;</code></pre>

        <p>
            Chrome also supports using prerender on <code>link</code> elements:
            <code>&lt;link rel="prerender" href="page"&gt;</code>
        </p>

        <p>
            While both a prefetch and a prerender for a page gets a page and all
            of its subresources, a prefetch only retrieves the page and all of
            its resources while a prerender goes one step further by rendering
            the entire page the background until the user navigates to it.
        </p>

        <h1 id="web-worker-notes">Web worker<a href="#">Back to top</a></h1>
        <p>
            JS usually uses one thread - browser's main thread. In order to
            enable more threads to be involved, we need to use
            <code>Worker</code> class, referred to as web wroker. This let's us
            use more than one thread!
        </p>
        <p>Example usage:</p>
        <code class="block-code"
            >const myWebWorker = new Worker('my-web-worker.js');</code
        >
        <p>Benefits come at cost though:</p>
        <ul>
            <li>web workers can not directly access the DOM,</li>
            <li>
                there can be soem sort of message pipeline for web worker to
                communicate indirectly with the DOM,
            </li>
            <li>
                the web worker scope is <code>self</code>, rather than
                <code>window</code>.
            </li>
        </ul>

        <p>
            Pipeline for the webworker can be created by adding event listeners
            for <code>message</code> event for the web worker as well as
            <code>window</code>.
        </p>

        <p>Message from web worker: <span id="web-worker-message"></span></p>
        <script>
            // Creates the web worker:
            const myWebWorker = new Worker('my-web-worker.js')

            // Adds an event listener on the web worker instance that listens for messages:
            myWebWorker.addEventListener('message', ({ data }) => {
                // Echoes "Hello, window!" to the console from the worker.
                console.log('Web worker data sent: ' + data)
                document.getElementById('web-worker-message').innerText = data
            })
        </script>
    </body>
</html>
